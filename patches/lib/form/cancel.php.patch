diff --git a/lib/form/cancel.php b/lib/form/cancel.php
index 1ef1128..79ab00a 100644
--- a/lib/form/cancel.php
+++ b/lib/form/cancel.php
@@ -1,5 +1,10 @@
 <?php
-require_once('HTML/QuickForm/submit.php');
+if (!defined('MOODLE_INTERNAL')) {
+    die('Direct access to this script is forbidden.');    ///  It must be included from a Moodle page
+}
+
+global $CFG;
+require_once($CFG->libdir.'/form/submit.php');
 
 /**
  * HTML class for a submit type element
@@ -51,4 +56,3 @@ class MoodleQuickForm_cancel extends MoodleQuickForm_submit
     }
     // }}}
 } //end class MoodleQuickForm_cancel
-?>
\ No newline at end of file
