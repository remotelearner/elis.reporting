diff --git a/lib/session-test.php b/lib/session-test.php
index 32aa7b9..f38479f 100644
--- a/lib/session-test.php
+++ b/lib/session-test.php
@@ -1,22 +1,39 @@
 <?php
-/// This is a tiny standalone diagnostic script to test that sessions 
-/// are working correctly on a given server.  
-///
-/// Just run it from a browser.   The first time you run it will 
-/// set a new variable, and after that it will try to find it again.
-/// The random number is just to prevent browser caching.
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
 
-session_start();
+/**
+ * This is a tiny standalone diagnostic script to test that sessions
+ * are working correctly on a given server.
+ *
+ * Just run it from a browser.   The first time you run it will
+ * set a new variable, and after that it will try to find it again.
+ * The random number is just to prevent browser caching.
+ *
+ * @todo add code that actually tests moodle sessions, the old one only tested
+ *       PHP sessions used from installer, not the real moodle sessions
+ * @package   moodlecore
+ * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}
+ * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
 
-if (!isset($_SESSION["test"])) {   // First time you call it.
-    echo "<p>No session found - starting a session now.";
-    $_SESSION["test"] = "welcome back!";
+/** Include config {@see config.php} */
+require '../config.php';
 
-} else {                           // Subsequent times you call it
-    echo "<p>Session found - ".$_SESSION["test"];
-    echo "</p><p>Sessions are working correctly</p>";
-}
+$PAGE->set_url('/lib/session-test.php');
 
-echo "<p><a href=\"session-test.php?random=".rand(1,10000)."\">Reload this page</a></p>";
-
-?>
+error('session test not reimplemented yet'); //DO NOT localize or use print_error()!
+//
+//TODO: add code that actually tests moodle sessions, the old one only tested PHP sessions used from installer, not the real moodle sessions
