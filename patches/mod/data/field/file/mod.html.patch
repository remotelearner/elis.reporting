diff --git a/mod/data/field/file/mod.html b/mod/data/field/file/mod.html
old mode 100755
new mode 100644
index 9fd3c60..73815b5
--- a/mod/data/field/file/mod.html
+++ b/mod/data/field/file/mod.html
@@ -12,9 +12,9 @@
             <?php echo get_string('maxsize', 'data'); ?></label></td>
         <td class="c1">
             <?php
-                $course->maxbytes = get_field('course', 'maxbytes', 'id', $this->data->course);
+                $course->maxbytes = $DB->get_field('course', 'maxbytes', array('id'=>$this->data->course));
                 $choices = get_max_upload_sizes($CFG->maxbytes, $course->maxbytes);
-                choose_from_menu($choices, 'param3', $this->field->param3, '', '', 0, false, false, 0, 'param3');
+                echo html_writer::select($choices, 'param3', $this->field->param3, false, array('id' => 'param3'));
             ?>
         </td>
     </tr>
