diff --git a/mod/data/settings.php b/mod/data/settings.php
index 8b2af4e..ce14647 100644
--- a/mod/data/settings.php
+++ b/mod/data/settings.php
@@ -1,14 +1,16 @@
-<?php  //$Id$
+<?php
 
-if (empty($CFG->enablerssfeeds)) {
+defined('MOODLE_INTERNAL') || die;
+
+if ($ADMIN->fulltree) {
+    if (empty($CFG->enablerssfeeds)) {
     $options = array(0 => get_string('rssglobaldisabled', 'admin'));
     $str = get_string('configenablerssfeeds', 'data').'<br />'.get_string('configenablerssfeedsdisabled2', 'admin');
 
-} else {
+    } else {
     $options = array(0=>get_string('no'), 1=>get_string('yes'));
     $str = get_string('configenablerssfeeds', 'data');
-}
-$settings->add(new admin_setting_configselect('data_enablerssfeeds', get_string('enablerssfeeds', 'admin'),
+    }
+    $settings->add(new admin_setting_configselect('data_enablerssfeeds', get_string('enablerssfeeds', 'admin'),
                    $str, 0, $options));
-
-?>
+}
