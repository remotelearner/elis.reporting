diff --git a/auth/fc/auth.php b/auth/fc/auth.php
index 95b8743..3717dc4 100644
--- a/auth/fc/auth.php
+++ b/auth/fc/auth.php
@@ -178,15 +178,15 @@ class auth_plugin_fc extends auth_plugin_base {
             return; //nothing to sync - creators not configured
         }
 
-        if ($roles = get_roles_with_capability('moodle/legacy:coursecreator', CAP_ALLOW)) {
+        if ($roles = get_archetype_roles('coursecreator')) {
             $creatorrole = array_shift($roles);      // We can only use one, let's use the first one
             $systemcontext = get_context_instance(CONTEXT_SYSTEM);
 
             if ($iscreator) { // Following calls will not create duplicates
-                role_assign($creatorrole->id, $user->id, 0, $systemcontext->id, 0, 0, 0, 'fc');
+                role_assign($creatorrole->id, $user->id, $systemcontext->id, 'auth_fc');
             } else {
                 //unassign only if previously assigned by this plugin!
-                role_unassign($creatorrole->id, $user->id, 0, $systemcontext->id, 'fc');
+                role_unassign($creatorrole->id, $user->id, $systemcontext->id, 'auth_fc');
             }
         }
     }
@@ -240,4 +240,4 @@ class auth_plugin_fc extends auth_plugin_base {
 
 }
 
-?>
+
