diff --git a/admin/xmldb/actions/new_table/new_table.class.php b/admin/xmldb/actions/new_table/new_table.class.php
index 424c465..da5440e 100644
--- a/admin/xmldb/actions/new_table/new_table.class.php
+++ b/admin/xmldb/actions/new_table/new_table.class.php
@@ -1,31 +1,33 @@
-<?php // $Id$
-
-///////////////////////////////////////////////////////////////////////////
-//                                                                       //
-// NOTICE OF COPYRIGHT                                                   //
-//                                                                       //
-// Moodle - Modular Object-Oriented Dynamic Learning Environment         //
-//          http://moodle.com                                            //
-//                                                                       //
-// Copyright (C) 1999 onwards Martin Dougiamas        http://dougiamas.com  //
-//           (C) 2001-3001 Eloy Lafuente (stronk7) http://contiento.com  //
-//                                                                       //
-// This program is free software; you can redistribute it and/or modify  //
-// it under the terms of the GNU General Public License as published by  //
-// the Free Software Foundation; either version 2 of the License, or     //
-// (at your option) any later version.                                   //
-//                                                                       //
-// This program is distributed in the hope that it will be useful,       //
-// but WITHOUT ANY WARRANTY; without even the implied warranty of        //
-// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         //
-// GNU General Public License for more details:                          //
-//                                                                       //
-//          http://www.gnu.org/copyleft/gpl.html                         //
-//                                                                       //
-///////////////////////////////////////////////////////////////////////////
-
-/// This class will create a new default table to be edited
+<?php
+
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * @package   xmldb-editor
+ * @copyright 2003 onwards Eloy Lafuente (stronk7) {@link http://stronk7.com}
+ * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
 
+/**
+ * This class will create a new default table to be edited
+ *
+ * @package   xmldb-editor
+ * @copyright 2003 onwards Eloy Lafuente (stronk7) {@link http://stronk7.com}
+ * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
 class new_table extends XMLDBAction {
 
     /**
@@ -62,7 +64,7 @@ class new_table extends XMLDBAction {
     /// Do the job, setting result as needed
     /// Get the dir containing the file
         $dirpath = required_param('dir', PARAM_PATH);
-        $dirpath = $CFG->dirroot . stripslashes_safe($dirpath);
+        $dirpath = $CFG->dirroot . $dirpath;
 
     /// Get the correct dirs
         if (!empty($XMLDB->dbdirs)) {
@@ -84,7 +86,7 @@ class new_table extends XMLDBAction {
             }
         }
         if (!$changeme_exists) { /// Lets create the table
-            $field = new XMLDBField('id');
+            $field = new xmldb_field('id');
             $field->setType(XMLDB_TYPE_INTEGER);
             $field->setLength(10);
             $field->setNotNull(true);
@@ -93,18 +95,18 @@ class new_table extends XMLDBAction {
             $field->setLoaded(true);
             $field->setChanged(true);
 
-            $key = new XMLDBKey('primary');
+            $key = new xmldb_key('primary');
             $key->setType(XMLDB_KEY_PRIMARY);
             $key->setFields(array('id'));
             $key->setLoaded(true);
             $key->setChanged(true);
 
-            $table = new XMLDBTable('changeme');
+            $table = new xmldb_table('changeme');
             $table->setComment('Default comment for the table, please edit me');
             $table->addField($field);
             $table->addKey($key);
 
-        /// Finally, add the whole retroffited table to the structure
+        /// Finally, add the whole retrofitted table to the structure
         /// in the place specified
             $structure->addTable($table);
         }
@@ -117,4 +119,4 @@ class new_table extends XMLDBAction {
         return $result;
     }
 }
-?>
+
